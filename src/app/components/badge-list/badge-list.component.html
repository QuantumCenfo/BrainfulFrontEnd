<div class="container2">
  <div class="container text-center">
    <div class="row">
      <div
        class="col-md-6 col-sm-12 mb-5 badge-container mx-5"
        *ngFor="let badge of badgeList; let i = index"
        (click)="flipCard(i)"
      >
        <div
          class="badge-card"
          [ngStyle]="{
            background: getColor(i),
            'box-shadow': getBoxShadow(i)
          }"
          [ngClass]="{ flipped: flippedIndexes.includes(i) }"
        >
          <div class="badge-front">
            <img
              *ngIf="badge.url; else elseBlockImg"
              [src]="badge.url"
              alt="Badge image"
              width="85px"
              height="85px"
            />
            <ng-template #elseBlockImg>
              <img
                src="../../../assets/icons/medal.png"
                alt="Badge image"
                width="85px"
                height="85px"
              />
            </ng-template>
          </div>
          <div class="badge-back">
            <div class="btn-container">
              <ng-container *ngIf="isAllowed">
                <button
                  class="btn btn-primary"
                  (click)="showDetailModal(badge, showModal)"
                >
                  <i class="fa-solid fa-pencil"></i>
                </button>
                <button
                  class="btn btn-primary"
                  (click)="delteBadge(badge.badgeId!)"
                >
                  <i class="fa-solid fa-trash"></i>
                </button>
              </ng-container>
            </div>
            <div class="card-back-content">
              <h3>{{ badge.title }}</h3>
              <p>{{ badge.description }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <app-modal #showModal>
      <app-badge-form
        (callParentEvent)="onFormEventCalled($event)"
        [badge]="selectedBadge"
        [actualFile]="selectedFile"
        [btn]="'Actualizar'"
      />
    </app-modal>
  </div>
</div>
