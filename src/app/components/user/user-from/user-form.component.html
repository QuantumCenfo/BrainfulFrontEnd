<div class="container edit-container fs-5">
  <div class="img-container">
    <img
      src="../../../../assets/icons/LogoCerebro.png"
      width="175px"
      height="100px"
      alt="Brainful logo"
    />
  </div>
  <h2>
    {{ title }}
  </h2>

  <div class="row">
    <div class="col-md-6">
      <label class="mb-3" for="name"
        >Nombre<span style="color: red">*</span></label
      >
      <input
        type="text"
        #name="ngModel"
        class="form-control mb-3"
        id="name"
        name="name"
        [(ngModel)]="user.name"
        [ngClass]="{
          'is-invalid': name.invalid && name.touched,
          'is-valid': name.valid && name.touched
        }"
        required
      />
    </div>
    <div class="col-md-6">
      <label class="mb-3" for="lastName"
        >Apellido<span style="color: red">*</span></label
      >
      <input
        type="text"
        name="lastName"
        id="lastName"
        #lastName="ngModel"
        class="form-control mb-3"
        [(ngModel)]="user.lastname"
        [ngClass]="{
          'is-invalid': lastName.invalid && lastName.touched,
          'is-valid': lastName.valid && lastName.touched
        }"
        required
      />
    </div>

    <ng-container *ngIf="title === 'Editar Usuario'; else elseBlockBOD">
      <div class="col-md-12">
        <label class="mb-3" for="correo"
          >Correo<span style="color: red">*</span></label
        >
        <input
          type="text"
          name="correo"
          id="correo"
          #correo="ngModel"
          class="form-control mb-3"
          [(ngModel)]="user.email"
          [ngClass]="{
            'is-invalid': correo.invalid && correo.touched,
            'is-valid': correo.valid && correo.touched
          }"
          required
        />
      </div>
    </ng-container>
    <ng-template #elseBlockBOD>
      <div class="col-md-6">
        <label class="mb-3" for="correo"
          >Correo<span style="color: red">*</span></label
        >
        <input
          type="text"
          name="correo"
          id="correo"
          #correo="ngModel"
          class="form-control mb-3"
          [(ngModel)]="user.email"
          [ngClass]="{
            'is-invalid': correo.invalid && correo.touched,
            'is-valid': correo.valid && correo.touched
          }"
          required
        />
      </div>
    </ng-template>

    <div class="col-md-6" *ngIf="action == 'Agregar'">
      <label for="birthDate" class="form-label mb-3"
        >Fecha de Nacimiento <span style="color: red">*</span>
      </label>
      <input
        type="date"
        #birthDate="ngModel"
        class="form-control mb-3"
        id="birthDate"
        name="birthDate"
        [(ngModel)]="user.birthDate"
        [ngClass]="{
          'is-invalid': birthDate.invalid && birthDate.touched,
          'is-valid': birthDate.valid && birthDate.touched
        }"
        required
      />
    </div>

    <div class="col-md-12">
      <label class="mb-3" for="rol">Rol<span style="color: red">*</span></label>

      <select
        [(ngModel)]="roleId"
        #role="ngModel"
        name="role"
        id="role"
        class="form-select form-control mb-3"
      >
        <option value="" selected>Seleccione un rol</option>
        <option *ngFor="let role of roles" [value]="role.id">
          {{ role.name }}
        </option>
      </select>
    </div>

    <label for="image" class="mb-3">Foto</label>
    <div class="file-input mb-3">
      <label for="image"
        ><i class="fa-solid fa-arrow-up-from-bracket fa-2xl"></i>
        <input
          #image="ngModel"
          type="file"
          class="form-control file"
          id="iamge"
          name="image"
          (change)="onFileChange($event)"
          [(ngModel)]="user.image"
        />
      </label>
    </div>
    <div class="d-flex justify-content-center align-items-center mt-5">
      <button type="button" (click)="addUser()" class="btn btn-primary">
        {{ action }}
      </button>
    </div>
  </div>
</div>
